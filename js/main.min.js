import*as flsFunctions from"./modules/functions.js";import{initSlider}from"./modules/slider.js";import"./modules/popup.js";document.addEventListener("DOMContentLoaded",(function(){window.FLS=!0,document.addEventListener("click",(function(e){const t=document.querySelector(".icon-menu"),n=e.target.closest(".menu__link"),s=e.target.closest(".menu__list");n||e.target===t||t.contains(e.target)||s||flsFunctions.htmlElement.classList.contains("menu-open")&&(flsFunctions.menuClose(),flsFunctions.hideMenu())})),flsFunctions.menuInit(),flsFunctions.hideMenu(),initSlider();const e=document.documentElement,t=document.querySelector(".wrapper"),n=document.querySelector(".icon-menu"),s=document.querySelector(".hero"),o=document.querySelector(".hero__inner"),i=document.querySelector(".header"),c=document.querySelector(".header .logo__icon"),l=document.querySelector(".menu__body");console.debug("innerWidth",o.getBoundingClientRect().width);function u(){window.innerWidth<425?e.classList.add("sticky-icons"):e.classList.remove("sticky-icons")}new IntersectionObserver((function(t){const s=t[0];console.debug("entry",s),s.isIntersecting?(i.classList.remove("sticky"),n.style.left="auto",e.classList.contains("sticky-icons")&&e.classList.remove("sticky-icons")):(i.classList.add("sticky"),c.style.left=o.getBoundingClientRect().left+"px",n.style.left=o.getBoundingClientRect().right-n.getBoundingClientRect().width+"px",u())}),{root:null,threshold:0}).observe(s),window.addEventListener("resize",(function(){i.classList.contains("sticky")&&(c.style.left=o.getBoundingClientRect().left+"px",n.style.left=o.getBoundingClientRect().right-n.getBoundingClientRect().width+"px"),document.documentElement.classList.contains("menu-open")&&(l.style.left=t.getBoundingClientRect().left+"px")})),window.addEventListener("resize",u);const d=document.forms.form,r=d.phone;r.addEventListener("input",(function(){r.value.startsWith("+")||(r.value="+"+r.value.replace(/[^0-9]/g,"")),r.value=r.value.replace(/(?!^)\+/g,"").replace(/[^0-9+]/g,"");const e=r.value.replace("+","");e.length<11?r.setCustomValidity("+37212345678"):r.setCustomValidity(""),e.length>11&&(r.value="+"+e.slice(0,11))}));const a=d.email;a.addEventListener("input",(function(){const e=a.value,t=e.includes("@"),n=e.match(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/);t&&!n?a.setCustomValidity("email@address.com"):a.setCustomValidity("")}));const m=d.button,g=m.textContent;console.debug("originalButtonText",g),d.addEventListener("submit",(function(e){e.preventDefault(),setTimeout((()=>{m.textContent="Request sent",m.classList.add("submit"),console.debug("Форма отправлена!")}),200),setTimeout((()=>{d.reset(),m.textContent=g,m.classList.remove("submit"),console.debug("Форма сброшена!")}),2e3)}))}));